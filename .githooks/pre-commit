#!/bin/bash
# Auto-bump patch version on every commit

PLUGIN_JSON="plugins/quick-review/.claude-plugin/plugin.json"

if [[ -f "$PLUGIN_JSON" ]]; then
  # Bump patch version: 0.5.6 -> 0.5.7
  jq '.version |= (split(".") | .[2] |= (tonumber + 1 | tostring) | join("."))' \
    "$PLUGIN_JSON" > "$PLUGIN_JSON.tmp" && mv "$PLUGIN_JSON.tmp" "$PLUGIN_JSON"

  git add "$PLUGIN_JSON"
fi
